<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image to PDF Converter</title>
<style>
    body {
        font-family: Arial, sans-serif;
    }
    #upload-form {
        margin: 20px;
    }
    #preview-image {
        max-width: 100%;
        max-height: 400px;
        margin-top: 20px;
    }
</style>
</head>
<body>
<h1>Image to PDF Converter</h1>
<form id="upload-form" enctype="multipart/form-data">
    <input type="file" id="image-input" accept="image/*" multiple required>
    <button type="submit">Convert to PDF</button>
</form>
<div id="preview-image"></div>
<!-- Conversion message element -->
<div id="conversion-message"></div>
<script>
document.getElementById('upload-form').addEventListener('submit', function(event) {
    event.preventDefault();
    let fileInput = document.getElementById('image-input');
    let files = fileInput.files;
    
    if (files.length > 0 && files.length <= 16) {
        // Show conversion message
        document.getElementById('conversion-message').innerText = 'Converting images to PDF...';

        let pdf = new jsPDF('p', 'in', 'letter');
        
        for (let i = 0; i < files.length; i++) {
            let file = files[i];
            let reader = new FileReader();
            reader.onload = function(event) {
                let imgData = event.target.result;
                let img = new Image();
                img.src = imgData;
                img.onload = function() {
                    let aspectRatio = img.width / img.height;
                    let width = 2 * aspectRatio; // Width calculated based on aspect ratio
                    let height = 2; // Height set to 1 inch

                    let columnWidth = 8.5 / 4; // Divide page width by number of columns
                    let rowHeight = 11 / 4; // Divide page height by number of rows
                    let x = (i % 4) * columnWidth; // Calculate x position based on column width
                    let y = Math.floor(i / 2) * rowHeight; // Calculate y position based on row height

                    // Add the image without rotation
                    pdf.addImage(imgData, 'PNG', x, y, width, height);

                    // Rotate the image by 180 degrees and add it again
                    //pdf.addImage(imgData, 'PNG', x + width, y + height, width, height, null, 180);

                    if (i === files.length - 1) {
                        pdf.save('converted_images.pdf');
                        // Hide conversion message after PDF is saved
                        document.getElementById('conversion-message').innerText = '';
                    }
                };
            };
            reader.readAsDataURL(file);
        }
    } else {
        alert("Please upload between 1 and 16 images.");
    }
});


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
</body>
</html>

